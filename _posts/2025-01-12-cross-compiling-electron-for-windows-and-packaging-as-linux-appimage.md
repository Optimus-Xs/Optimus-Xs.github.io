---
layout: post
title: Electron åœ¨ Windows ä¸‹çš„äº¤å‰ç¼–è¯‘æ‰“åŒ…å‘å¸ƒåˆ° Linux Appimage æ ¼å¼
date: 2025-01-12 00:39 +0800
categories: [Software Development]
tags: [Electron, Linux, Windows]
---


> **TL;DR**:
>
> ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤åˆ©ç”¨Docker Desktopå®¹å™¨å†…çš„Linuxç¯å¢ƒåœ¨Windowsä¸Šå®ç°Linuxå®‰è£…åŒ…å‘å¸ƒ
>
> ```shell
> docker run --rm -it `
>   -v ${PWD}:/project `
>   -v ${HOME}/.cache/electron:/root/.cache/electron `
>   -v ${HOME}/.cache/electron-builder:/root/.cache/electron-builder `
>   electronuserland/builder:node18-wine /bin/bash -c "npm install && npm run dist -- --linux appimage"
> ```
{: .prompt-tip }

## Electron æ‰“åŒ…å‘å¸ƒç®€ä»‹
### Electron çš„æ‰“åŒ…å‘å¸ƒæ–¹æ¡ˆ
é’ˆå¯¹ Electron åº”ç”¨çš„æ‰“åŒ…å’Œå‘å¸ƒï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆå’Œå·¥å…·ï¼š

**ğŸŒˆ è‡ªåŠ¨åŒ–æ‰“åŒ…å·¥å…·ï¼ˆæ¨èï¼‰**

è¿™æ˜¯ç›®å‰æœ€å¸¸ç”¨å’Œæ¨èçš„æ–¹å¼ï¼Œå®ƒä»¬å°†æ‰“åŒ…ã€ç”Ÿæˆå®‰è£…ç¨‹åº/å¯åˆ†å‘æ–‡ä»¶ã€ä»£ç ç­¾åç­‰æµç¨‹é«˜åº¦é›†æˆå’Œè‡ªåŠ¨åŒ–ã€‚

**Electron Forge**

- **å®šä½**ï¼š è‡´åŠ›äºç»Ÿä¸€ Electron çš„å·¥å…·ç”Ÿæ€ï¼Œæä¾›ä¸€å¥—å¯æ‰©å±•çš„æ¥å£ï¼Œç®€åŒ–æ‰“åŒ…å’Œå‘å¸ƒçš„æµç¨‹ã€‚
- **æ ¸å¿ƒåŠŸèƒ½**ï¼š ç»“åˆäº† electron-packager ç­‰æ ¸å¿ƒæ¨¡å—ï¼Œé€šè¿‡ make å‘½ä»¤å¯ä»¥ä¸€æ­¥å®Œæˆæ‰“åŒ… (package) å’Œç”Ÿæˆå¯åˆ†å‘æ–‡ä»¶ (make)ã€‚
- **æ”¯æŒæ ¼å¼**ï¼š å¯ä»¥é…ç½®ç”Ÿæˆå„ç§ç³»ç»Ÿç‰¹å®šçš„å¯åˆ†å‘æ–‡ä»¶ï¼Œå¦‚ DMG (macOS), deb/rpm (Linux), MSI/exe (Windows) ç­‰ã€‚
- **ä»£ç ç­¾å**ï¼š æ”¯æŒåœ¨é…ç½®ä¸­æ·»åŠ è¯ä¹¦ä¿¡æ¯ï¼Œå®ç°åº”ç”¨æ‰“åŒ…æˆ–ç”Ÿæˆå¯åˆ†å‘æ–‡ä»¶æ—¶çš„ä»£ç ç­¾åï¼Œè¿™æ˜¯åº”ç”¨è¢«ç”¨æˆ·ç³»ç»Ÿä¿¡ä»»çš„å…³é”®æ­¥éª¤ã€‚

**electron-builder**

- **å®šä½**ï¼š ä¸€ä¸ªå®Œå¤‡çš„ Electron åº”ç”¨æ‰“åŒ…å’Œåˆ†å‘è§£å†³æ–¹æ¡ˆï¼Œè‡´åŠ›äºé›†æˆä½“éªŒã€‚
- **æ ¸å¿ƒåŠŸèƒ½**ï¼š å†…éƒ¨ç®¡ç†äº†è®¸å¤šä¾èµ–é¡¹å’Œè¦æ±‚ï¼Œæä¾›é«˜åº¦é›†æˆçš„æ‰“åŒ…å’Œå‘å¸ƒæµç¨‹ã€‚
- **ç‰¹ç‚¹**ï¼š åœ¨æ‰“åŒ…åº”ç”¨ç»„ä»¶çš„é›†æˆåº¦ä¸Šè¾ƒé«˜ï¼Œå¹¶ä¸”é€šå¸¸ä¼šæ›¿æ¢æˆ–é›†æˆä¸€äº› Electron ç»´æŠ¤è€…ä½¿ç”¨çš„æ¨¡å—ï¼ˆä¾‹å¦‚è‡ªåŠ¨æ›´æ–°å™¨ï¼‰ã€‚

**ğŸ”¨ æ‰‹åŠ¨æ‰“åŒ…æˆ–åº•å±‚å·¥å…·**

å¯¹äºéœ€è¦é«˜åº¦å®šåˆ¶æˆ–æ›´åº•å±‚æ§åˆ¶çš„åœºæ™¯ï¼š

ä½¿ç”¨ `electron-packager` æˆ– `electron-winstaller` ç­‰åº•å±‚å·¥å…·

`electron-packager`ï¼š å°†åº”ç”¨ä»£ç ä¸ Electron äºŒè¿›åˆ¶æ–‡ä»¶ç»“åˆèµ·æ¥ï¼Œç”Ÿæˆä¸€ä¸ªå¯è¿è¡Œçš„æ–‡ä»¶å¤¹/åº”ç”¨åŒ…ï¼ˆä½†ä¸æ˜¯å®‰è£…ç¨‹åºï¼‰ã€‚ä½ éœ€è¦åœ¨æ­¤åŸºç¡€ä¸Šä½¿ç”¨å…¶ä»–å·¥å…·æ¥ç”Ÿæˆå®‰è£…ç¨‹åºã€‚

å…¶ä»– Maker å·¥å…·ï¼š ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ `electron-winstaller` æˆ–å…¶ä»–ç‰¹å®šçš„å·¥å…·æ¥åŸºäºæ‰“åŒ…åçš„åº”ç”¨æ–‡ä»¶å¤¹åˆ›å»º Windows å®‰è£…ç¨‹åº (MSI/exe)ã€‚

### Electron çš„æ‰“åŒ…å‘å¸ƒæµç¨‹
è¿™é‡Œæˆ‘ä»¬ä¸»è¦ä½¿ç”¨`electron-builder`ä½œä¸ºæ¡ˆä¾‹æ¥åˆ†æElectroné¡¹ç›®çš„æ‰“åŒ…å‘å¸ƒæµç¨‹:

`electron-builder` çš„æ ¸å¿ƒæµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹å››ä¸ªä¸»è¦é˜¶æ®µï¼š

**é˜¶æ®µä¸€ï¼šåˆå§‹åŒ–ä¸èµ„æºæ”¶é›†**

- é…ç½®æ£€æŸ¥ä¸ç›®æ ‡ç¡®å®šï¼š
    - `electron-builder` è¯»å– `package.json` ä¸­çš„ `build` é…ç½®ï¼Œç¡®å®šå®¿ä¸»æ“ä½œç³»ç»Ÿï¼ˆHost OSï¼Œå³æ‰§è¡Œæ‰“åŒ…çš„ç³»ç»Ÿï¼Œå¦‚ Windowsï¼‰å’Œç›®æ ‡æ“ä½œç³»ç»Ÿï¼ˆTarget OSï¼Œå¦‚ macOS, Linuxï¼‰ã€‚
    - å®ƒä¼šæ£€æŸ¥æ˜¯å¦é…ç½®äº† `files` æ¥åŒ…å«æ‰€æœ‰å¿…è¦çš„åº”ç”¨æ–‡ä»¶ã€‚
- âš ï¸ åŸç”Ÿä¾èµ–å½±å“ç‚¹ï¼ˆ`package.json`ï¼‰ï¼š
    - `dependencies` å­—æ®µä¸­åˆ—å‡ºçš„æ‰€æœ‰åŸç”Ÿ Node æ¨¡å—ï¼ˆä¾‹å¦‚ä½¿ç”¨äº† C++ æ‰©å±•çš„æ¨¡å—ï¼Œå¦‚ `sqlite3`, `node-serialport` ç­‰ï¼‰å°†è¢«æ ‡è®°ä¸ºéœ€è¦è¿›è¡Œè·¨å¹³å°é‡ç¼–è¯‘ã€‚

**é˜¶æ®µäºŒï¼šåº”ç”¨æ‰“åŒ…ä¸è·¨å¹³å°é‡ç¼–è¯‘**

> è¿™æ˜¯å¤„ç†åŸç”Ÿä¾èµ–çš„æ ¸å¿ƒé˜¶æ®µã€‚

- ä¸‹è½½ç›®æ ‡å¹³å° Electron è¿è¡Œæ—¶ï¼š
    - `electron-builder` è‡ªåŠ¨ä» GitHub ä¸‹è½½å¯¹åº”ç›®æ ‡å¹³å°å’Œç›®æ ‡æ¶æ„ï¼ˆå¦‚ `macOS-arm64` æˆ– `win32-ia32`ï¼‰çš„ Electron é¢„æ„å»ºäºŒè¿›åˆ¶æ–‡ä»¶ã€‚
- åŸç”Ÿæ¨¡å—é‡ç¼–è¯‘ï¼š
    - `electron-builder` ä¼šè°ƒç”¨åº•å±‚å·¥å…·ï¼ˆå¦‚ `electron-rebuild` æˆ–å…¶å†…éƒ¨æœºåˆ¶ï¼‰ï¼Œå°†ç¬¬ä¸€é˜¶æ®µè¯†åˆ«å‡ºçš„æ‰€æœ‰åŸç”Ÿæ¨¡å—é’ˆå¯¹ç›®æ ‡ Electron ç‰ˆæœ¬å’Œç›®æ ‡æ“ä½œç³»ç»Ÿ/æ¶æ„è¿›è¡Œé‡æ–°ç¼–è¯‘ã€‚
    - è¿™æ˜¯è·¨å¹³å°æ‰“åŒ…æˆåŠŸçš„å…³é”®ã€‚å¦‚æœè¿™ä¸€æ­¥å¤±è´¥ï¼Œç”Ÿæˆçš„åº”ç”¨å°†æ— æ³•åŠ è½½è¿™äº›åŸç”Ÿæ¨¡å—ã€‚
    - æŸäº›å¤æ‚çš„åŸç”Ÿæ¨¡å—å¯èƒ½ä¾èµ–äºç›®æ ‡ç³»ç»Ÿçš„ç‰¹å®šç³»ç»Ÿåº“æˆ–ç¼–è¯‘å·¥å…·é“¾ã€‚è™½ç„¶ `electron-builder` å°½åŠ›è‡ªåŠ¨åŒ–ï¼Œä½†åœ¨ Windows ä¸Šä¸º Linux æˆ– macOS ç¼–è¯‘æŸäº›å¤æ‚çš„ C++ æ¨¡å—æ—¶ä»å¯èƒ½é‡åˆ°é—®é¢˜ã€‚
- ä»£ç å°è£…ï¼š
    - å°†é‡ç¼–è¯‘åçš„åŸç”Ÿæ¨¡å—å’Œåº”ç”¨ä»£ç ä¸€èµ·æ‰“åŒ…æˆ `asar` æ–‡ä»¶ï¼ˆæˆ–å…¶ä»–é `asar` æ ¼å¼ï¼‰ã€‚

**é˜¶æ®µä¸‰ï¼šå¯åˆ†å‘æ–‡ä»¶åˆ¶ä½œä¸ä»£ç ç­¾å**

> æ­¤é˜¶æ®µç›´æ¥å—é™äºå®¿ä¸»ç³»ç»Ÿå¯¹ç›®æ ‡ç³»ç»Ÿç­¾åå·¥å…·çš„æ”¯æŒã€‚

- ç”Ÿæˆå®‰è£…ç¨‹åºï¼š
    - `electron-builder` æ ¹æ®é…ç½®ï¼ˆå¦‚ `win` ä¸­çš„ `target: ["nsis", "portable"]`ï¼‰ï¼Œä½¿ç”¨å†…éƒ¨æˆ–å¤–éƒ¨å·¥å…·ï¼ˆå¦‚ NSIS, DMG Makerï¼‰ç”Ÿæˆæœ€ç»ˆçš„å¯åˆ†å‘æ–‡ä»¶ã€‚
- ğŸ” ä»£ç ç­¾å (Code Signing)ï¼š è¿™æ˜¯è·¨å¹³å°æ‰“åŒ…æœ€å¤§çš„éšœç¢æ‰€åœ¨ã€‚
    - macOS ç­¾åï¼š åˆ¶ä½œ macOS å®‰è£…åŒ…ï¼ˆDMG/PKGï¼‰å¹¶è¿›è¡Œ Apple Developer ID ç­¾åï¼Œå‡ ä¹å¿…é¡»åœ¨ macOS å®¿ä¸»ç³»ç»Ÿä¸Šå®Œæˆã€‚Windows æˆ– Linux ç¼ºä¹ Apple ä¸“æœ‰å·¥å…·å’Œæƒé™ç®¡ç†ï¼Œæ— æ³•å¯é åœ°è¿›è¡Œ `dmg` åˆ¶ä½œå’Œ - `notarization`ï¼ˆå…¬è¯ï¼‰ã€‚
    - Windows ç­¾åï¼š åˆ¶ä½œ Windows å®‰è£…åŒ…ï¼ˆEXE/MSIï¼‰å¹¶è¿›è¡Œ `Authenticode` ç­¾åï¼Œå¯ä»¥åœ¨ macOS æˆ– Linux ä¸Šå®Œæˆï¼Œåªè¦æä¾›äº†æœ‰æ•ˆçš„è¯ä¹¦æ–‡ä»¶å’Œå¯†ç ã€‚
    - Linux ç­¾åï¼š AppImage, Deb, Rpm é€šå¸¸æ¶‰åŠ GPG ç­¾åï¼Œè¿™åœ¨ä¸åŒå®¿ä¸»ç³»ç»Ÿä¸Šç›¸å¯¹å®¹æ˜“äº¤å‰æ‰§è¡Œã€‚

`electron-builder`è·¨å¹³å°æ‰“åŒ…èƒ½åŠ›æ€»ç»“

| å®¿ä¸»æ“ä½œç³»ç»Ÿ (æ‰§è¡Œæ‰“åŒ…çš„ç³»ç»Ÿ) | ç›®æ ‡å¹³å° (è¦åˆ¶ä½œçš„å®‰è£…åŒ…)      | æ˜¯å¦æ”¯æŒ (å¼€ç®±å³ç”¨)    |
| :---------------------------- | :----------------------------- | :--------------------- |
| Windows                       | "Linux (`.deb` `AppImage` ç­‰)" | âœ… æ˜¯                   |
| Windows                       | "macOS (`.dmg` `.pkg`)"        | âš ï¸ æœ‰é™æ”¯æŒ/æ¨èå€ŸåŠ© CI |
| macOS                         | "Windows (`.exe` `.msi`)"      | âœ… æ˜¯                   |
| macOS                         | "Linux (`.deb` `AppImage` ç­‰)" | âœ… æ˜¯                   |
| Linux                         | "Windows (`.exe` `.msi`)"      | âœ… æ˜¯                   |
| Linux                         | "macOS (`.dmg` `.pkg`)"        | âŒ å¦                   |

**é˜¶æ®µå››ï¼šå‘å¸ƒä¸åˆ†å‘**

è‡ªåŠ¨æ›´æ–°ä¾èµ–ï¼š

- ç”Ÿæˆçš„ `artifact`ï¼ˆå®‰è£…åŒ…å’Œ `latest.yml` / `latest.json` ç­‰æ–‡ä»¶ï¼‰çš„å…ƒæ•°æ®æ˜¯ä¸º `electron-updater` å‡†å¤‡çš„ã€‚
- åŸç”Ÿä¾èµ–å½±å“ï¼š å¦‚æœä½ çš„åº”ç”¨éœ€è¦åœ¨æ›´æ–°ä¸­åˆ‡æ¢åˆ°ä¸åŒçš„åŸç”Ÿæ¨¡å—ç‰ˆæœ¬ï¼ˆä¾‹å¦‚ï¼Œä» `x64` æ›´æ–°åˆ° `arm64`ï¼‰ï¼Œè‡ªåŠ¨æ›´æ–°æœºåˆ¶å¿…é¡»æ”¯æŒç›®æ ‡å¹³å°å’Œæ¶æ„çš„å·®å¼‚åŒ–ä¸‹è½½ã€‚

> å®ç°è·¨å¹³å°æ‰“åŒ…çš„å¿…è¦æ¡ä»¶è¦æˆåŠŸè¿›è¡Œè·¨å¹³å°æ‰“åŒ…ï¼Œéœ€è¦æ»¡è¶³ä»¥ä¸‹å‡ ä¸ªå…³é”®æ¡ä»¶ï¼š
> - Node.js åŸç”Ÿæ¨¡å—çš„äº¤å‰ç¼–è¯‘ï¼š å¦‚æœä½ çš„åº”ç”¨ä½¿ç”¨äº†ä»»ä½• Node.js åŸç”Ÿæ¨¡å—ï¼ˆC++ æ‰©å±•ï¼‰ï¼Œ`electron-builder` éœ€è¦èƒ½å¤Ÿä¸ºç›®æ ‡æ¶æ„ï¼ˆå¦‚ `x64`, `arm64`ï¼‰é‡æ–°ç¼–è¯‘è¿™äº›æ¨¡å—ã€‚
> - ç›®æ ‡å¹³å°çš„ Electron äºŒè¿›åˆ¶æ–‡ä»¶ï¼š `electron-builder` ä¼šè‡ªåŠ¨ä¸‹è½½é€‚ç”¨äºç›®æ ‡å¹³å°ï¼ˆå¦‚ `win32-x64`, `linux-arm64`ï¼‰çš„ Electron é¢„ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶ã€‚
> - ä»£ç ç­¾åè¯ä¹¦ï¼š è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚åœ¨ Windows ä¸Šåˆ¶ä½œ macOS åŒ…ï¼Œéœ€è¦ macOS è¯ä¹¦ã€‚åœ¨ macOS/Linux ä¸Šåˆ¶ä½œ Windows åŒ…ï¼Œéœ€è¦ Windows Authenticode è¯ä¹¦ã€‚
{: .prompt-tip }

### ä¸ºä»€ä¹ˆä¸å»ºè®®ä¼˜å…ˆä½¿ç”¨è·¨å¹³å°æ‰“åŒ…
è™½ç„¶ electron-builder å…·å¤‡è·¨å¹³å°æ‰“åŒ…çš„èƒ½åŠ›ï¼Œä½†å®˜æ–¹å’Œç¤¾åŒºçš„æœ€ä½³å®è·µï¼ˆBest Practiceï¼‰å§‹ç»ˆæ˜¯ï¼š**åœ¨å¯¹åº”çš„ç›®æ ‡è¿è¡Œå¹³å°ä¸Šæ‰“åŒ…å‘å¸ƒå¯¹åº”çš„åº”ç”¨**ã€‚

åœ¨ [electron-builder å®˜ç½‘æ–‡æ¡£](https://www.electron.build/multi-platform-build)ä¸­å…³äºå¤šå¹³å°æ„å»ºçš„è¯´æ˜ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°, å…¶ç¬¬ä¸€å¥è¯å°±è¯´åˆ°ï¼š

> ä¸è¦æœŸæœ›ä½ å¯ä»¥åœ¨ä¸€ä¸ªå¹³å°ä¸Šä¸ºæ‰€æœ‰å¹³å°æ„å»ºåº”ç”¨ç¨‹åºã€‚

**â€œåŸç”Ÿå¹³å°æ‰“åŒ…â€ä¼˜äºâ€œè·¨å¹³å°æ‰“åŒ…â€çš„å‡ ä¸ªæ ¸å¿ƒåŸå› **

**ğŸ›¡ï¸ æ— æ³•ç»•è¿‡çš„ç­¾åä¸å…¬è¯ï¼ˆå°¤å…¶æ˜¯ macOSï¼‰**

- macOS çš„å…¬è¯ (Notarization)ï¼š è‹¹æœè¦æ±‚æ‰€æœ‰åˆ†å‘çš„è½¯ä»¶å¿…é¡»ç»è¿‡å…¬è¯ã€‚è¿™ä¸ä»…éœ€è¦ä»£ç ç­¾åï¼Œè¿˜éœ€è¦è°ƒç”¨è‹¹æœä¸“æœ‰çš„ `altool` æˆ– `xcrun notarytool` å‘½ä»¤è¡Œå·¥å…·ã€‚è¿™äº›å·¥å…·ä»…å­˜åœ¨äº macOS ç³»ç»Ÿä¸­ã€‚
- Windows çš„ç¡¬ä»¶ç­¾åï¼š å¦‚æœä½ ä½¿ç”¨ EV (Extended Validation) è¯ä¹¦ï¼ˆå­˜å‚¨åœ¨ USB ä»¤ç‰Œä¸Šçš„è¯ä¹¦ï¼‰ï¼Œç‰©ç†ç¡¬ä»¶å¿…é¡»æ’å…¥æ­£åœ¨æ‰“åŒ…çš„æœºå™¨ã€‚åœ¨éåŸç”Ÿç¯å¢ƒä¸‹æ¨¡æ‹Ÿè¿™ç§ç¡¬ä»¶è®¿é—®éå¸¸å›°éš¾ã€‚

**ğŸ—ï¸ åŸç”Ÿä¾èµ– (Native Modules) çš„ä¸ç¡®å®šæ€§**

> å¦‚æœä½ çš„é¡¹ç›®åŒ…å«åŸç”Ÿä¾èµ–ï¼ˆå¦‚ `sqlite3`, `ffi-napi`, `sharp`ï¼‰ï¼Œè·¨å¹³å°æ‰“åŒ…ä¼šå˜å¾—æå…¶è„†å¼±ï¼š

- ç¼–è¯‘ç¯å¢ƒæ¨¡æ‹Ÿï¼š åœ¨ Windows ä¸Šä¸º Linux ç¼–è¯‘åŸç”Ÿæ¨¡å—ï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨ Windows ä¸Šæ¨¡æ‹Ÿ Linux çš„ç¼–è¯‘é“¾ï¼ˆ`GCC`, `Python` ç­‰ï¼‰ã€‚è¿™ç§æ¨¡æ‹Ÿå¾ˆå®¹æ˜“å› ä¸ºç¯å¢ƒç»†å¾®å·®åˆ«ï¼ˆå¦‚ `GLIBC` ç‰ˆæœ¬ä¸ä¸€è‡´ï¼‰å¯¼è‡´æ‰“åŒ…å‡ºçš„ç¨‹åºåœ¨çœŸå® Linux ä¸Šæ— æ³•è¿è¡Œï¼ˆæŠ¥é”™ `ELF header invalid` æˆ– `segmentation fault`ï¼‰ã€‚
- çœŸå®æ€§éªŒè¯ï¼š åœ¨åŸç”Ÿå¹³å°ä¸Šæ‰“åŒ…ï¼Œä½ å¯ä»¥ç«‹å³åœ¨å½“å‰æœºå™¨ä¸Šè¿è¡Œç”Ÿæˆçš„å®‰è£…åŒ…ï¼Œè¿›è¡Œå†’çƒŸæµ‹è¯•ã€‚è€Œåœ¨è·¨å¹³å°æ‰“åŒ…æ—¶ï¼Œä½ åªèƒ½ç›²ç›®ç›¸ä¿¡æ‰“åŒ…å·¥å…·ï¼Œç›´åˆ°å°†åŒ…ä¼ åˆ°å¦ä¸€å°æœºå™¨ä¸Šæµ‹è¯•æ‰èƒ½å‘ç°é—®é¢˜ã€‚

**ğŸ› ï¸ å¤æ‚çš„å·¥å…·é“¾ä¾èµ–**

ä¸ºäº†å®ç°è·¨å¹³å°ï¼Œ`electron-builder` å¾€å¾€éœ€è¦å€ŸåŠ©ä¸€äº›â€œæ¡¥æ¥â€å·¥å…·ï¼Œè¿™äº›å·¥å…·æœ¬èº«å°±å¢åŠ äº†å‡ºé”™çš„æ¦‚ç‡ï¼š

- WINEï¼š åœ¨ macOS/Linux ä¸Šæ‰“åŒ… Windows ç¨‹åºé€šå¸¸éœ€è¦å®‰è£… `WINE`ã€‚`WINE` çš„ç‰ˆæœ¬å…¼å®¹æ€§ã€å­—ä½“æ¸²æŸ“ã€ä»¥åŠå¯¹æŸäº›å¤æ‚å®‰è£…è„šæœ¬çš„æ”¯æŒå¹¶ä¸å®Œç¾ã€‚
- Monoï¼š å¤„ç†æŸäº› Windows èµ„æºæ–‡ä»¶æ—¶å¯èƒ½éœ€è¦ `Mono` æ¡†æ¶ã€‚

## æ–¹æ¡ˆåŸç†
è™½ç„¶`electron-builder`é¡¹ç›®ç»„æ˜ç¡®å£°æ˜äº†ä¼˜å…ˆä½¿ç”¨åŸç”Ÿå¹³å°æ‰“åŒ…, ä½†æ˜¯è¿™å¹¶ä¸æ„å‘³åˆ™æˆ‘ä»¬å¿…é¡»ä½¿ç”¨å•ç‹¬çš„Linuxæˆ–è€…MacOSçš„ç‰©ç†æœºæ‰èƒ½å®ŒæˆElectronåº”ç”¨åœ¨å¯¹äºå¹³å°çš„å‘å¸ƒ, å°¤å…¶æ˜¯åˆ™è·¯å¾„è™šæ‹ŸåŒ–æŠ€æœ¯éå¸¸å®Œå–„çš„æ—¶ä»£.

è¿™é‡Œæˆ‘ä»¬å®Œå…¨å¯ä»¥ä½¿ç”¨ç‰©ç†æœºæˆ–è€…å•ç‹¬çš„CIæµç¨‹ä½¿ç”¨äº‘ç«¯åºåˆ—ç¯å¢ƒå®ŒæˆElectronåº”ç”¨çš„æ‰“åŒ…å‘å¸ƒ, ä½†æ˜¯è€ƒè™‘åˆ°è¿™é‡Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯åœ¨æœ¬åœ°Windowså¼€å‘è®¡å™¨ä¸Šå®ŒæˆLinuxå‘å¸ƒåŒ…çš„ç”Ÿæˆ, æˆ‘ä»¬å®Œå…¨å¯ä»¥ä½¿ç”¨ä½¿ç”¨Linuxå†…æ ¸å®ç°çš„Dockerçš„å®¹å™¨ç¯å¢ƒå®Œæˆé¡¹ç›®çš„æ‰“åŒ…å‘å¸ƒ

> electron-builder å®˜æ–¹æ–‡æ¡£å’Œç»´æŠ¤è€…æ›´å€¾å‘äºæ¨èä½¿ç”¨ CI/CD (æŒç»­é›†æˆ) æµç¨‹æ¥è§£å†³è·¨å¹³å°éœ€æ±‚ï¼Œè€Œä¸æ˜¯åœ¨ä¸€å°æœºå™¨ä¸Šå®Œæˆæ‰€æœ‰å¹³å°çš„æ‰“åŒ…ï¼š
>
> æµç¨‹å¦‚ä¸‹ï¼š
> 
> - å¼€å‘è€…æäº¤ä»£ç åˆ° GitHub/GitLabã€‚
> - è§¦å‘ CI è„šæœ¬ï¼ŒåŒæ—¶å¯åŠ¨ä¸‰ä¸ªè™šæ‹Ÿæœºï¼ˆRunnersï¼‰ï¼š`Windows Runner`ã€`macOS Runner`ã€`Linux Runner`ã€‚
> - æ¯ä¸ªå¹³å°å„å¸å…¶èŒï¼š macOS Runner åªè´Ÿè´£æ‰“åŒ…ã€ç­¾åå’Œå…¬è¯ `.dmg`ï¼›Windows Runner è´Ÿè´£ç”Ÿæˆå¹¶ç­¾å `.exe`ã€‚
> - æœ€åå°†ä¸‰ä¸ªå¹³å°çš„äº§ç‰©æ±‡æ€»å¹¶å‘å¸ƒã€‚
>
> å¯¹äºå•†ä¸šåŒ–äº§å“ï¼Œé€šè¿‡ CI/CD å®ç°åŸç”Ÿå¹³å°æ‰“åŒ…å› ä¸ºèƒ½è‡ªåŠ¨åŒ–æµ‹è¯•å’Œå‘å¸ƒ, æ˜¯æœ‰æ›´é«˜ç¨³å®šæ€§å’Œç”¨æˆ·ä½“éªŒçš„é€‰æ‹©, å¯¹äºæµ‹è¯•å‘å¸ƒå’Œä¸ªäººç”¨é€”è€Œè¨€åœ¨æœ¬æœºæ­å»ºç›®æ ‡ç³»ç»Ÿçš„è™šæ‹Ÿç¯å¢ƒæ›´åŠ æ–¹ä¾¿å’Œè½»é‡
{: .prompt-tip }

è¿™é‡Œæˆ‘ä»¬é€‰æ‹© Windows ä¸Šçš„ Docekr Desktop å®Œæˆ Linux å¹³å°çš„å®‰è£…åŒ…å‘å¸ƒ:

> åœ¨[`electron-builder`çš„å‘å¸ƒæ–‡æ¡£](https://www.electron.build/multi-platform-build#build-electron-app-using-docker-on-a-local-machine)çš„æœ«å°¾ä¹Ÿæä¾›äº†ï¼Œä½¿ç”¨ Docker æ¥æ„å»º Linux å®‰è£…åŒ…çš„æ–¹æ¡ˆã€‚

Windows ä¸Šçš„ Docekr Desktop ä½¿ç”¨ WSL 2 ä½œä¸ºé»˜è®¤çš„è¿è¡Œåç«¯, è€Œ WSL 2 (Windows Subsystem for Linux 2) æä¾›çš„**åŸç”Ÿ Linux å†…æ ¸ç¯å¢ƒ**ï¼Œä»¥åŠ Docker å®¹å™¨çš„éš”ç¦»å’Œæ ‡å‡†åŒ–æ„å»ºèƒ½åŠ›. 

`electron-builder` åœ¨ä¸ºç‰¹å®šæ“ä½œç³»ç»Ÿï¼ˆå¦‚ Linuxï¼‰æ‰“åŒ…æ—¶ï¼Œéœ€è¦ç›®æ ‡å¹³å°ç‰¹å®šçš„ç³»ç»Ÿä¾èµ–åº“ã€å·¥å…·é“¾å’Œæ–‡ä»¶æ ¼å¼ï¼ˆå¦‚ `AppImage`, `deb`, `rpm` ç­‰ï¼‰ã€‚åœ¨ WSL 2 ä¸­ï¼Œå¯ä»¥åƒåœ¨ä»»ä½•æ ‡å‡†çš„ Linux ä¸»æœºä¸Šä¸€æ ·å®‰è£…è¿™äº›ä¾èµ–é¡¹ã€‚

é€šè¿‡åœ¨ WSL 2 ä¸­çš„ Docker å®¹å™¨ï¼Œ`electron-builder`åœ¨æ‰“åŒ…çš„æ—¶å€™è·å¾—äº†ä¸€ä¸ªåŸç”Ÿã€å®Œæ•´çš„ Linux å†…æ ¸å’Œé¢„é…ç½®çš„æ„å»ºç¯å¢ƒã€‚é¿å…äº†åœ¨ Windows ä¸»æœºä¸Šæ‰‹åŠ¨å®‰è£…å’Œé…ç½®å¤æ‚çš„ Linux äº¤å‰ç¼–è¯‘å·¥å…·é“¾, å…¶è¿è¡Œç¯å¢ƒå®Œå…¨ç­‰åŒäºä¸€ä¸ªå®Œæ•´çš„Linuxè™šæ‹Ÿæœºæˆ–è€…ç‰©ç†æœº, Windows å®¿ä¸»æœºä»…ä½œä¸ºæ–‡ä»¶å­˜å‚¨å’ŒæŒ‡ä»¤å‘èµ·è€…ï¼Œè€Œå°†æ‰€æœ‰ç¼–è¯‘ã€ä¾èµ–ä¸‹è½½ã€åŸç”Ÿæ¨¡å—æ„å»ºï¼ˆNative Rebuildï¼‰ä»¥åŠå®‰è£…åŒ…å°è£…çš„è¿‡ç¨‹å…¨éƒ¨ç§»äº¤ç»™ Linux å®¹å™¨ã€‚

æ–¹æ¡ˆä¼˜åŠ¿:

- **ç¯å¢ƒå¯¹é½**ï¼š Docker å®¹å™¨è¿è¡Œçš„æ˜¯çœŸæ­£çš„ Linux å‘è¡Œç‰ˆå†…æ ¸ï¼ˆé€šå¸¸æ˜¯åŸºäº Debian æˆ– Alpineï¼‰ã€‚è¿™æ„å‘³ç€å®¹å™¨å†…çš„ `gcc`ã€`g++`ã€`make` ä»¥åŠ `glibc` éƒ½æ˜¯ Linux åŸç”Ÿçš„ã€‚
- **æ–‡ä»¶æ˜ å°„**ï¼š ä½ é€šè¿‡ Docker å°† Windows ä¸Šçš„é¡¹ç›®æºä»£ç æ–‡ä»¶å¤¹æŒ‚è½½åˆ°å®¹å™¨å†…çš„è·¯å¾„ï¼ˆä¾‹å¦‚ `/project`ï¼‰ã€‚
- **åŸç”Ÿæ„å»º**ï¼š å½“ä½ åœ¨å®¹å™¨å†…è¿è¡Œ `electron-builder` æ—¶ï¼Œå¦‚æœé¡¹ç›®æœ‰åŸç”Ÿä¾èµ–ï¼ˆå¦‚ `node-canvas` æˆ– `sqlite3`ï¼‰ï¼Œå®ƒä»¬ä¼šç›´æ¥åœ¨å®¹å™¨çš„ Linux ç¯å¢ƒä¸‹è¿›è¡Œç¼–è¯‘ã€‚ç”Ÿæˆçš„ `.node` äºŒè¿›åˆ¶æ–‡ä»¶æ˜¯æ ‡å‡†çš„ ELF æ ¼å¼ï¼Œè€Œé Windows çš„ PE æ ¼å¼ã€‚
- **æ— ç¼äº§å‡º**ï¼š æ‰“åŒ…å®Œæˆåï¼Œ`electron-builder` ç”Ÿæˆçš„ `.deb`ã€`.AppImage` æˆ– `.rpm` æ–‡ä»¶ä¼šç›´æ¥å‡ºç°åœ¨ä½  Windows çš„ `dist` æ–‡ä»¶å¤¹ä¸­ï¼Œå› ä¸ºè¯¥æ–‡ä»¶å¤¹æ˜¯å…±äº«æŒ‚è½½çš„ã€‚

## æ‰“åŒ…å®ç°æµç¨‹
### å‡†å¤‡WSL2å’ŒDocker Desktop

WSL 2 ä¾èµ–äºWindowsçš„Hyper-Vè™šæ‹ŸåŒ–æŠ€æœ¯, æˆ‘ä»¬è¦é¦–å…ˆæ£€æŸ¥Hyper-Vçš„ç¡¬ä»¶å…¼å®¹æ€§:

é¦–å…ˆåœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ systeminfo æ£€æŸ¥éªŒè¯ç¡¬ä»¶å…¼å®¹æ€§ï¼Œç„¶åæ£€æŸ¥ Hyper-V è¦æ±‚éƒ¨åˆ†ï¼ŒéªŒè¯Windowsä¸­çš„ç¡¬ä»¶å…¼å®¹æ€§ã€‚å¦‚æœæ‰€æœ‰åˆ—å‡ºçš„Hyper-Vè¦æ±‚çš„å€¼éƒ½ä¸ºYes(å…¥ä¸‹é¢æ‰€ç¤º)ï¼Œåˆ™ç³»ç»Ÿå¯ä»¥è¿è¡ŒHyper-V

```text
C:\WINDOWS\system32>

Hyper-V è¦æ±‚:    è™šæ‹Ÿæœºç›‘è§†å™¨æ¨¡å¼æ‰©å±•:æ˜¯
                å›ºä»¶ä¸­å·²å¯ç”¨è™šæ‹ŸåŒ–:æ˜¯
                äºŒçº§åœ°å€è½¬æ¢:æ˜¯
                æ•°æ®æ‰§è¡Œä¿æŠ¤å¯ç”¨:æ˜¯
```
{: file='Hyper-V å…¼å®¹æ€§æ£€æŸ¥ç»“æœ'}

éœ€è¦å››é¡¹å‡ä¸ºâ€œæ˜¯â€æ‰ç¬¦åˆè¿è¡ŒHyper-Vè™šæ‹Ÿæœºçš„è¦æ±‚, å¦‚æœéƒ¨åˆ†è®¾ç½®ä¸º`å¦`æˆ‘ä»¬éœ€è¦è¿›å…¥ä¸»æœºçš„BIOSå†…ä¿®æ”¹è™šæ‹ŸåŒ–çš„æ”¯æŒé€‰å‹, å…·ä½“æ“ä½œæµç¨‹å¯å‚è€ƒ[WSL é…ç½®æŒ‡å—](/posts/wsl-configuration-guide/#bios%E9%85%8D%E7%BD%AE)

åœ¨å®ŒæˆBIOS, è®¾ç½®åæˆ‘ä»¬éœ€è¦åœ¨WindowsåŠŸèƒ½ä¸­å¯ç”¨Hyper-V:

![Hyper-Vé…ç½®](https://cdn.jsdelivr.net/gh/Optimus-Xs/Blog-Images/2025-01-12-cross-compiling-electron-for-windows-and-packaging-as-linux-appimage%2Fhyper-v-configuration.png)

åœ¨å®ŒæˆHype-v å’Œ WSL åŠŸèƒ½çš„å¼€å¯å, ä¸éœ€è¦æ‰‹åŠ¨ç®¡ç† WSL çš„å­ç³»ç»Ÿé•œåƒã€‚ç„¶åå®‰è£…å¹¶è¿è¡Œ Docker Desktop å³å¯ï¼ŒDocker Desktop ä¼šè‡ªåŠ¨å¤„ç†åç»­çš„æ‰€æœ‰é…ç½®ã€‚

å®‰è£… Docker Desktop:

- ä» [Docker å®˜ç½‘](https://docs.docker.com/desktop/setup/install/windows-install/)ä¸‹è½½å¹¶å®‰è£… Docker Desktop for Windowså®‰è£…åŒ…
- åŒå‡»`Docker Desktop Installer.exe`è¿è¡Œå®‰è£…ç¨‹åº, æ ¹æ®ä½ é€‰æ‹©çš„åç«¯ï¼Œåœ¨é…ç½®é¡µé¢ä¸Šé€‰æ‹©â€œä½¿ç”¨ `WSL 2`â€é€‰é¡¹ï¼ˆå¦‚æœ‰æç¤ºï¼‰, ç­‰å¾…è‡ªåŠ¨é…ç½®å®Œæˆåå³å¯ä½¿ç”¨Docker

### å¯åŠ¨electron-builderå®¹å™¨
ä½¿ç”¨ä»¥ä¸‹æ§åˆ¶å°å‘½ä»¤ä¸‹è½½`electronuserland/builder` Docker é•œåƒ

```shell
docker pull electronuserland/builder
```

ç„¶åä» Electron é¡¹ç›®çš„æ ¹æ–‡ä»¶å¤¹ï¼ˆä¾‹å¦‚`C:\MyApp`ï¼‰ï¼Œé”®å…¥ä»¥ä¸‹å‘½ä»¤è¡Œå‘½ä»¤åˆ›å»ºå®¹å™¨å¹¶å°† Electron é¡¹ç›®çš„æ ¹æ–‡ä»¶å¤¹æ˜ å°„åˆ°æ‰“åŒ…å®¹å™¨çš„ `/project` è™šæ‹Ÿè·¯å¾„ï¼š

```bash
docker run --rm -ti -v C:\MyApp\:/project -w /project electronuserland/builder --name electron-builder
```

### åœ¨å®¹å™¨ä¸­å‘å¸ƒåº”ç”¨
åœ¨å®¹å™¨å†…éƒ¨ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤æ¥é‡æ–°å®‰è£… Electron é¡¹ç›®çš„ npm ä¾èµ–åŒ…, è¿™ä¸€æ­¥å¾ˆé‡è¦ã€‚å› ä¸ºæœ‰äº›è§£æçš„ npm ä¾èµ–åŒ…ä¼šæ ¹æ®é¡¹ç›®å’Œä¸åŒç¯å¢ƒä¸‹å®‰è£…ä¸åŒçš„ä¾èµ–

```bash
docker exec -it electron-builder bash
```
{: file='è¿›å…¥æ‰“åŒ…å®¹å™¨å†…éƒ¨'}

```bash
cd /project # è¿›å…¥å®¹å™¨å†…çš„é¡¹ç›®ç›®å½•
npm i   # å®‰è£…NPMä¾èµ–
npm run build # æ‰§è¡Œæ‰“åŒ…è„šæœ¬(Package.jsonä¸­é…ç½®å¥½äº†æ‰“åŒ…è„šæœ¬)
```
{: file='å‘å¸ƒæ‰§è¡Œ'}

ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„å‘½ä»¤ç”¨äºåˆ›å»ºä¸€æ¬¡æ€§å®¹å™¨æ¥æ„å»ºLiunxçš„Appimageå®‰è£…åŒ…,, å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªå‘½ä»¤æ¥æ›¿ä»£ä¸Šé¢çš„æ“ä½œ:

```shell
docker run --rm -it `
  -v ${PWD}:/project ` # æ˜ å°„å½“å‰é¡¹ç›®ç›®å½•æºç åˆ°å®¹å™¨å†…
  -v ${HOME}/.cache/electron:/root/.cache/electron ` # ç¼“å­˜Electron è¿è¡Œæ—¶äºŒè¿›åˆ¶æ–‡ä»¶ã€‚æŠ¥é”™å¤šæ¬¡æ„å»ºé‡å¤ä¸‹è½½å†…å®¹
  -v ${HOME}/.cache/electron-builder:/root/.cache/electron-builder ` # ç¼“å­˜å®‰è£…ç¨‹åºå·¥å…·å’Œå…ƒæ•°æ®ã€‚
  electronuserland/builder:node18-wine /bin/bash -c "npm install && npm run dist -- --linux appimage" # åœ¨å®¹å™¨å†…æ‰§è¡Œå®‰è£…å‘½ä»¤
```

## å®‰è£…Appimage
åœ¨å®¹å™¨ä¸­å®ŒæˆBuildå, é¡¹ç›®çš„`dist`ç›®å½•åº”è¯¥èƒ½çœ‹åˆ°ä¸€ä¸ªå‘å¸ƒçš„`.AppImage`æ–‡ä»¶, è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥å°†`.AppImage`æ–‡ä»¶å¤åˆ¶åˆ°ç›®æ ‡æœºå™¨æ‰§è¡Œå®‰è£…æµç¨‹

### èµ‹äºˆå¯æ‰§è¡Œçš„æƒé™
è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`chmod`è®¾ç½®`.AppImage`æ–‡ä»¶çš„æƒé™:

```bash
sudo chmod u+x ./Your.AppImage
```

æˆ–è€…åœ¨GUIä¸­æ“ä½œé…ç½®æƒé™:

![AppImageæ–‡ä»¶å±æ€§](https://cdn.jsdelivr.net/gh/Optimus-Xs/Blog-Images/2025-01-12-cross-compiling-electron-for-windows-and-packaging-as-linux-appimage%2Fappimage-file-attributes.png)

å³å‡»æ–‡ä»¶ï¼Œèµ‹äºˆå¯æ‰§è¡Œæƒé™

![AppImageä¿®æ”¹æƒé™](https://cdn.jsdelivr.net/gh/Optimus-Xs/Blog-Images/2025-01-12-cross-compiling-electron-for-windows-and-packaging-as-linux-appimage%2Fappimage-permissions-modification.png)

### FUSEé…ç½®
AppImageéœ€è¦FUSEæ‰èƒ½è¿è¡Œ, å¦‚æœæ²¡æœ‰å®‰è£…FUSEç›´æ¥è¿è¡ŒAppImageä¼šå‡ºç°ä»¥ä¸‹é”™è¯¯:

```
AppImages require FUSE to run. 
```
{: file='FUSEé”™è¯¯æç¤º'}

> AppImage è¿è¡Œä¸ºä»€ä¹ˆéœ€è¦ FUSE ?
> 
> AppImage éœ€è¦ FUSE (Filesystem in Userspace) æ˜¯ä¸ºäº†è®©ä¸€ä¸ªå•ä¸€çš„ã€å‹ç¼©çš„ AppImage æ–‡ä»¶èƒ½å¤Ÿåœ¨ç”¨æˆ·ç©ºé—´è¢«å½“ä½œä¸€ä¸ªå®Œæ•´çš„ã€å¯æ‰§è¡Œçš„æ–‡ä»¶ç³»ç»Ÿè¿›è¡ŒæŒ‚è½½å’Œè®¿é—®ï¼Œè€Œæ— éœ€ root æƒé™
>
> FUSEï¼ˆFilesystem in Userspaceï¼Œç”¨æˆ·ç©ºé—´æ–‡ä»¶ç³»ç»Ÿï¼‰æ˜¯ä¸€ä¸ª Linux å†…æ ¸æ¨¡å—ã€‚å®ƒå…è®¸éç‰¹æƒç”¨æˆ·ï¼ˆå³æ™®é€šç”¨æˆ·ï¼Œä¸æ˜¯ rootï¼‰ç¼–å†™è‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿé©±åŠ¨ï¼Œå¹¶åœ¨ç”¨æˆ·ç©ºé—´è¿è¡Œã€‚
>
> æ²¡æœ‰ FUSEï¼Œå¦‚æœæ™®é€šç”¨æˆ·æƒ³è¦è®¿é—® AppImage å†…çš„æ–‡ä»¶ç³»ç»Ÿ
>
> - å®Œå…¨è§£å‹ï¼š æ¯æ¬¡è¿è¡Œ AppImage éƒ½å¿…é¡»å°†å…¶å®Œæ•´è§£å‹åˆ°ä¸´æ—¶ç›®å½•, è¿èƒŒäº† AppImage å³æ—¶è¿è¡Œçš„ç†å¿µ
> - ä½¿ç”¨ Root æƒé™æŒ‚è½½ï¼š ä¼ ç»Ÿä¸ŠæŒ‚è½½ `SquashFS` éœ€è¦ `root` æƒé™ã€‚è¦æ±‚ç”¨æˆ·ä½¿ç”¨ `sudo` è¿è¡Œä¸€ä¸ª GUI åº”ç”¨æ˜¯éå¸¸ä¸å®‰å…¨ä¸”ç”¨æˆ·ä½“éªŒæå·®çš„
{: .prompt-tip }

**FUSEå®‰è£…**:

Debian (`>= 13`) and Ubuntu (`>= 24.04`):

```bash
sudo add-apt-repository universe
sudo apt install libfuse2t64
```

Ubuntu (`>= 22.04`)

```bash
sudo add-apt-repository universe
sudo apt install libfuse2
```

å®Œæ•´å®‰è£…å¯å‚è€ƒæ–‡æ¡£ [Install FUSE](https://github.com/AppImage/AppImageKit/wiki/FUSE)

### æ¡Œé¢å›¾æ ‡é…ç½®
å®Œæˆä¸Šè¿°é…ç½®å, å°±å¯ä»¥ä½¿ç”¨ä¸‹é¢ä¸¤è€…æ–¹å¼å¯åŠ¨åº”ç”¨:

- å³é”®åŒå‡»
- ä»¥å‘½ä»¤è¡Œæ–¹å¼è¿è¡Œ`./Your.AppImage`

å½“ä¸¤è€…å¯èƒ½éƒ½ä¸å¤ªæ–¹ä¾¿, è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæ¡Œé¢å¿«æ·æ–¹å¼:

åœ¨`~/desktop`ç›®å½•ä¸‹åˆ›å»º`YourApp.desktop`æ–‡ä»¶, ç¼–è¾‘æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹

```ini
[Desktop Entry]
Name=Your App # åå­—
Comment=A Electron App #æè¿°
Exec=/opt/your-app/Your.AppImage #æ–‡ä»¶ç»å¯¹è·¯å¾„
Icon=/opt/your-app/app.png #å›¾æ ‡ç»å¯¹è·¯å¾„
Terminal=false
Type=Application
Categories=Developer
```
{: file=''}

åˆ›å»ºå®Œåï¼Œåœ¨æ¡Œé¢å³é”®å›¾æ ‡ï¼Œé€‰æ‹© `å…è®¸è¿è¡Œ`

![å›¾æ ‡æƒé™](https://cdn.jsdelivr.net/gh/Optimus-Xs/Blog-Images/2025-01-12-cross-compiling-electron-for-windows-and-packaging-as-linux-appimage%2Ficon-permissions.png)

åˆ°è¿™é‡Œæ¡Œé¢å¿«æ·æ–¹å¼å·²ç»åˆ›å»ºå®Œäº†ï¼Œä¸æƒ³æ”¾æ¡Œé¢çš„å¯ä»¥ç§»åŠ¨æ–‡ä»¶åˆ°èœå•

```bash
# Ubuntuçš„èœå•æ–‡ä»¶å¤¹æ˜¯ /usr/share/applications/
sudo mv Your.desktop /usr/share/applications/
```

å®Œæˆè¿™æ­¥ï¼Œå·²ç»æ·»åŠ åˆ°èœå•äº†ï¼Œä¹‹åå³å‡»ï¼Œé€‰æ‹©æ·»åŠ åˆ°æ”¶è—å¤¹ï¼Œå³å¯æ·»åŠ åˆ°ä¾§è¾¹æ 

# å‚è€ƒ
- [åœ¨Windowä¸‹æ‰“åŒ…Electronçš„linuxåŒ…](https://blog.csdn.net/linzhi12/article/details/119026910)
- [FUSE Â· AppImage/AppImageKit Wiki](https://github.com/AppImage/AppImageKit/wiki/FUSE)
