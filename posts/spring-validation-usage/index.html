<!DOCTYPE html><html lang="zh-CN" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="prefer-datetime-locale" content="zh-cn"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="ä¼˜é›…çš„ä½¿ç”¨Spring Validationå®ç°ä¸šåŠ¡å‚æ•°æ ¡éªŒ" /><meta property="og:locale" content="zh_CN" /><meta name="description" content="å‰è¨€" /><meta property="og:description" content="å‰è¨€" /><link rel="canonical" href="https://optimus-xs.github.io/posts/spring-validation-usage/" /><meta property="og:url" content="https://optimus-xs.github.io/posts/spring-validation-usage/" /><meta property="og:site_name" content="Optimus-Xsâ€™ Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-03-03T17:11:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="ä¼˜é›…çš„ä½¿ç”¨Spring Validationå®ç°ä¸šåŠ¡å‚æ•°æ ¡éªŒ" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="VWHcsZQRCRLxZT171OOZpP1emj_N4gMlSvgq8UReWz4" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-03-03T17:11:00+08:00","datePublished":"2021-03-03T17:11:00+08:00","description":"å‰è¨€","headline":"ä¼˜é›…çš„ä½¿ç”¨Spring Validationå®ç°ä¸šåŠ¡å‚æ•°æ ¡éªŒ","mainEntityOfPage":{"@type":"WebPage","@id":"https://optimus-xs.github.io/posts/spring-validation-usage/"},"url":"https://optimus-xs.github.io/posts/spring-validation-usage/"}</script><title>ä¼˜é›…çš„ä½¿ç”¨Spring Validationå®ç°ä¸šåŠ¡å‚æ•°æ ¡éªŒ | Optimus-Xs' Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Optimus-Xs' Blog"><meta name="application-name" content="Optimus-Xs' Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/img/miTu.jpg " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Optimus-Xs' Blog</a></div><div class="site-subtitle font-italic">ã€ŒThink Differentã€</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>é¦–é¡µ</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>åˆ†ç±»</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>æ ‡ç­¾</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>å½’æ¡£</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>å…³äº</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/Optimus-Xs" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['Wenlong.Zuo','outlook.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> é¦–é¡µ </a> </span> <span>ä¼˜é›…çš„ä½¿ç”¨Spring Validationå®ç°ä¸šåŠ¡å‚æ•°æ ¡éªŒ</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> æ–‡ç« </div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="æœç´¢..."> </span> <span id="search-cancel" >å–æ¶ˆ</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>ä¼˜é›…çš„ä½¿ç”¨Spring Validationå®ç°ä¸šåŠ¡å‚æ•°æ ¡éªŒ</h1><div class="post-meta text-muted"><div> ä½œè€… <em> <a href="https://github.com/Optimus-Xs">Optimus-Xs</a> </em></div><div class="d-flex"><div> <span> å‘è¡¨äº <em class="timeago" data-ts="1614762660" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2021-03-03 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2573 å­—"> <em>14 åˆ†é’Ÿ</em>é˜…è¯»</span></div></div></div><div class="post-content"><h1 id="å‰è¨€">å‰è¨€</h1><p>åœ¨å¹³æ—¶å†™controlleræ—¶å€™ï¼Œéƒ½éœ€è¦å¯¹è¯·æ±‚å‚æ•°è¿›è¡Œåç«¯æ ¡éªŒï¼Œä¸€èˆ¬å†™æ³•å¦‚ä¸‹ï¼š</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="nc">String</span> <span class="nf">add</span><span class="o">(</span><span class="n">user</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getAge</span><span class="o">()</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>
        <span class="k">return</span> <span class="s">"å¹´é¾„ä¸èƒ½ä¸ºç©º"</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">if</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getAge</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">120</span><span class="o">){</span>
        <span class="k">return</span> <span class="s">"å¹´é¾„ä¸èƒ½è¶…è¿‡120"</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">if</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">isEmpty</span><span class="o">()){</span>
        <span class="k">return</span> <span class="s">"ç”¨æˆ·åä¸èƒ½ä¸ºç©º"</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="c1">// çœç•¥ä¸€å †å‚æ•°æ ¡éªŒ...</span>
    <span class="k">return</span> <span class="s">"Done"</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div><p>ä¸šåŠ¡ä»£ç è¿˜æ²¡å¼€å§‹å†™å‘¢ï¼Œå…‰å‚æ•°æ ¡éªŒå°±å†™äº†ä¸€å †åˆ¤æ–­ã€‚è¿™æ ·å†™è™½ç„¶æ²¡ä»€ä¹ˆé”™ï¼Œä½†æ˜¯ç»™äººçš„æ„Ÿè§‰å°±æ˜¯ï¼š<strong>ä¸ä¼˜é›…</strong>ğŸ˜…,å…¶å®SpringBootæä¾›æ•´åˆäº†å‚æ•°æ ¡éªŒè§£å†³æ–¹æ¡ˆspring-boot-starter-validation</p><h1 id="ä¾èµ–é…ç½®">ä¾èµ–é…ç½®</h1><p>ç¬¬ä¸€æ­¥å°±å¾ˆç®€å•äº†ï¼Œç›´æ¥åœ¨ pom.xml ä¸­å¼•å…¥ä¾èµ–å°±è¡Œï¼š</p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="c">&lt;!--æ ¡éªŒç»„ä»¶--&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-validation<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="c">&lt;!--webç»„ä»¶--&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-web<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></table></code></div></div><blockquote class="prompt-tip"><div><p>å…¶ä¸­ Springboot-2.3 ä¹‹å‰çš„ç‰ˆæœ¬åªéœ€è¦å¼•å…¥ web ä¾èµ–å°±å¯ä»¥äº†ã€‚</p></div></blockquote><h1 id="vildationçš„ç®€å•ä½¿ç”¨">Vildationçš„ç®€å•ä½¿ç”¨</h1><h2 id="spring-validation-å†…ç½®æ ¡éªŒæ³¨è§£"><span class="mr-2">Spring Validation å†…ç½®æ ¡éªŒæ³¨è§£</span><a href="#spring-validation-å†…ç½®æ ¡éªŒæ³¨è§£" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><div class="table-wrapper"><table><thead><tr><th style="text-align: left">æ³¨è§£<th style="text-align: left">æ ¡éªŒåŠŸèƒ½<tbody><tr><td style="text-align: left">@AssertFalse<td style="text-align: left">å¿…é¡»æ˜¯false<tr><td style="text-align: left">@AssertTrue<td style="text-align: left">å¿…é¡»æ˜¯true<tr><td style="text-align: left">@DecimalMax<td style="text-align: left">å°äºç­‰äºç»™å®šçš„å€¼<tr><td style="text-align: left">@DecimalMin<td style="text-align: left">å¤§äºç­‰äºç»™å®šçš„å€¼<tr><td style="text-align: left">@Digits<td style="text-align: left">å¯è®¾å®šæœ€å¤§æ•´æ•°ä½æ•°å’Œæœ€å¤§å°æ•°ä½æ•°<tr><td style="text-align: left">@Email<td style="text-align: left">æ ¡éªŒæ˜¯å¦ç¬¦åˆEmailæ ¼å¼<tr><td style="text-align: left">@Future<td style="text-align: left">å¿…é¡»æ˜¯å°†æ¥çš„æ—¶é—´<tr><td style="text-align: left">@FutureOrPresent<td style="text-align: left">å½“å‰æˆ–å°†æ¥æ—¶é—´<tr><td style="text-align: left">@Max<td style="text-align: left">æœ€å¤§å€¼<tr><td style="text-align: left">@Min<td style="text-align: left">æœ€å°å€¼<tr><td style="text-align: left">@Negative<td style="text-align: left">è´Ÿæ•°ï¼ˆä¸åŒ…æ‹¬0ï¼‰<tr><td style="text-align: left">@NegativeOrZero<td style="text-align: left">è´Ÿæ•°æˆ–0<tr><td style="text-align: left">@NotBlank<td style="text-align: left">ä¸ä¸ºnullå¹¶ä¸”åŒ…å«è‡³å°‘ä¸€ä¸ªéç©ºç™½å­—ç¬¦<tr><td style="text-align: left">@NotEmpty<td style="text-align: left">ä¸ä¸ºnullå¹¶ä¸”ä¸ä¸ºç©º<tr><td style="text-align: left">@NotNull<td style="text-align: left">ä¸ä¸ºnull<tr><td style="text-align: left">@Null<td style="text-align: left">ä¸ºnull<tr><td style="text-align: left">@Past<td style="text-align: left">å¿…é¡»æ˜¯è¿‡å»çš„æ—¶é—´<tr><td style="text-align: left">@PastOrPresent<td style="text-align: left">å¿…é¡»æ˜¯è¿‡å»çš„æ—¶é—´ï¼ŒåŒ…å«ç°åœ¨<tr><td style="text-align: left">@Pattern<td style="text-align: left">å¿…é¡»æ»¡è¶³æ­£åˆ™è¡¨è¾¾å¼<tr><td style="text-align: left">@PositiveOrZero<td style="text-align: left">æ­£æ•°æˆ–0<tr><td style="text-align: left">@Size<td style="text-align: left">æ ¡éªŒå®¹å™¨çš„å…ƒç´ ä¸ªæ•°</table></div><h2 id="å•ä¸ªå‚æ•°æ ¡éªŒ"><span class="mr-2">å•ä¸ªå‚æ•°æ ¡éªŒ</span><a href="#å•ä¸ªå‚æ•°æ ¡éªŒ" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>åœ¨ä¸Šé¢çš„åŸºç¡€ä¸Šåªéœ€è¦åœ¨å¯¹è±¡å‚æ•°å‰é¢åŠ ä¸Š@Validatedæ³¨è§£ï¼Œç„¶ååœ¨éœ€è¦æ ¡éªŒçš„å¯¹è±¡å‚æ•°çš„å±æ€§ä¸Šé¢åŠ ä¸Š@NotNullï¼Œ@NotEmptyä¹‹ç±»å‚æ•°æ ¡éªŒæ³¨è§£å°±è¡Œäº†</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nd">@Validated</span>
<span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/home"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProductController</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="nc">Result</span> <span class="nf">index</span><span class="o">(</span><span class="nd">@NotBlank</span> <span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nd">@Email</span> <span class="nd">@NotBlank</span> <span class="nc">String</span> <span class="n">email</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">ResultResponse</span><span class="o">.</span><span class="na">success</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span> 
</pre></table></code></div></div><h2 id="å¯¹è±¡å‚æ•°æ ¡éªŒ"><span class="mr-2">å¯¹è±¡å‚æ•°æ ¡éªŒ</span><a href="#å¯¹è±¡å‚æ•°æ ¡éªŒ" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>åœ¨ä¸Šé¢çš„åŸºç¡€ä¸Šåªéœ€è¦åœ¨å¯¹è±¡å‚æ•°å‰é¢åŠ ä¸Š@Validatedæ³¨è§£ï¼Œç„¶ååœ¨éœ€è¦æ ¡éªŒçš„å¯¹è±¡å‚æ•°çš„å±æ€§ä¸Šé¢åŠ ä¸Š @NotNullï¼Œ@NotEmptyä¹‹ç±»å‚æ•°æ ¡éªŒæ³¨è§£å°±è¡Œäº†</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">user</span> <span class="o">{</span>
    <span class="nd">@NotNull</span><span class="o">(</span><span class="n">message</span> <span class="o">=</span> <span class="s">"age ä¸èƒ½ä¸ºç©º"</span><span class="o">)</span>    <span class="c1">//æ ¡éªŒæç¤ºä¿¡æ¯</span>
    <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">age</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div><h2 id="éªŒè¯æ¶ˆæ¯è¿”å›"><span class="mr-2">éªŒè¯æ¶ˆæ¯è¿”å›</span><a href="#éªŒè¯æ¶ˆæ¯è¿”å›" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="ç›´æ¥è·å–éªŒè¯ç»“æœ"><span class="mr-2">ç›´æ¥è·å–éªŒè¯ç»“æœ</span><a href="#ç›´æ¥è·å–éªŒè¯ç»“æœ" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>ç„¶ååœ¨ Controller æ–¹æ³•ä¸­æ·»åŠ  @Validated å’Œç”¨äºæ¥æ”¶é”™è¯¯ä¿¡æ¯çš„ BindingResult å°±å¯ä»¥äº†ï¼Œäºæ˜¯æœ‰äº†Ver1ï¼š</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="nc">String</span> <span class="nf">add1</span><span class="o">(</span><span class="nd">@Validated</span> <span class="n">user</span> <span class="n">user</span><span class="o">,</span> <span class="nc">BindingResult</span> <span class="n">result</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">FieldError</span><span class="o">&gt;</span> <span class="n">fieldErrors</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="na">getFieldErrors</span><span class="o">();</span>
    <span class="k">if</span><span class="o">(!</span><span class="n">fieldErrors</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">()){</span>
        <span class="k">return</span> <span class="n">fieldErrors</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="na">getDefaultMessage</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="s">"OK"</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div><p>é€šè¿‡å·¥å…·(Postman æˆ–è€… IDEA æ’ä»¶ RestfulToolKit )å»è¯·æ±‚æ¥å£ï¼Œå¦‚æœå‚æ•°ä¸ç¬¦åˆè§„åˆ™ï¼Œä¼šå°†ç›¸åº”çš„ message ä¿¡æ¯è¿”å›</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>age ä¸èƒ½ä¸ºç©º
</pre></table></code></div></div><h3 id="è§„èŒƒè¿”å›å€¼"><span class="mr-2">è§„èŒƒè¿”å›å€¼</span><a href="#è§„èŒƒè¿”å›å€¼" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>å¾…æ ¡éªŒå‚æ•°å¤šäº†ä¹‹åæˆ‘ä»¬å¸Œæœ›ä¸€æ¬¡è¿”å›æ‰€æœ‰æ ¡éªŒå¤±è´¥ä¿¡æ¯ï¼Œæ–¹ä¾¿æ¥å£è°ƒç”¨æ–¹è¿›è¡Œè°ƒæ•´ï¼Œè¿™å°±éœ€è¦ç»Ÿä¸€è¿”å›æ ¼å¼ï¼Œå¸¸è§çš„å°±æ˜¯å°è£…ä¸€ä¸ªç»“æœç±»</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ResultInfo</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;{</span>
    <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">status</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">message</span><span class="o">;</span>
    <span class="kd">private</span> <span class="no">T</span> <span class="n">response</span><span class="o">;</span>
    <span class="c1">// çœç•¥å…¶ä»–ä»£ç ...</span>
<span class="o">}</span>
</pre></table></code></div></div><p>æ”¹é€ ä¸€ä¸‹ Controller æ–¹æ³•ï¼ŒVer2</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="nc">ResultInfo</span> <span class="nf">add2</span><span class="o">(</span><span class="nd">@Validated</span> <span class="n">user</span> <span class="n">user</span><span class="o">,</span> <span class="nc">BindingResult</span> <span class="n">result</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">FieldError</span><span class="o">&gt;</span> <span class="n">fieldErrors</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="na">getFieldErrors</span><span class="o">();</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">collect</span> <span class="o">=</span> <span class="n">fieldErrors</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
            <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">o</span> <span class="o">-&gt;</span> <span class="n">o</span><span class="o">.</span><span class="na">getDefaultMessage</span><span class="o">())</span>
            <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nc">ResultInfo</span><span class="o">&lt;&gt;().</span><span class="na">success</span><span class="o">(</span><span class="mi">400</span><span class="o">,</span><span class="s">"è¯·æ±‚å‚æ•°é”™è¯¯"</span><span class="o">,</span><span class="n">collect</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><p>è¯·æ±‚è¯¥æ–¹æ³•æ—¶ï¼Œæ‰€æœ‰çš„é”™è¯¯å‚æ•°å°±éƒ½è¿”å›äº†ï¼š</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w">
    </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"è¯·æ±‚å‚æ•°é”™è¯¯"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"å¹´é¾„å¿…é¡»åœ¨[1,120]ä¹‹é—´"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"bg å­—æ®µçš„æ•´æ•°ä½æœ€å¤šä¸º3ä½ï¼Œå°æ•°ä½æœ€å¤šä¸º1ä½"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name ä¸èƒ½ä¸ºç©º"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email æ ¼å¼é”™è¯¯"</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><h1 id="å…¨å±€å¼‚å¸¸å¤„ç†">å…¨å±€å¼‚å¸¸å¤„ç†</h1><p>æ¯ä¸ª Controller æ–¹æ³•ä¸­å¦‚æœéƒ½å†™ä¸€é BindingResult ä¿¡æ¯çš„å¤„ç†ï¼Œä½¿ç”¨èµ·æ¥è¿˜æ˜¯å¾ˆç¹çã€‚å¯ä»¥é€šè¿‡å…¨å±€å¼‚å¸¸å¤„ç†çš„æ–¹å¼ç»Ÿä¸€å¤„ç†æ ¡éªŒå¼‚å¸¸ã€‚</p><p>å½“æˆ‘ä»¬å†™äº† @validated æ³¨è§£ï¼Œä¸å†™ BindingResult çš„æ—¶å€™ï¼ŒSpring å°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ç”±æ­¤ï¼Œå¯ä»¥å†™ä¸€ä¸ªå…¨å±€å¼‚å¸¸å¤„ç†ç±»æ¥ç»Ÿä¸€å¤„ç†è¿™ç§æ ¡éªŒå¼‚å¸¸ï¼Œä»è€Œå…å»é‡å¤ç»„ç»‡å¼‚å¸¸ä¿¡æ¯çš„ä»£ç ã€‚</p><p>å…¨å±€å¼‚å¸¸å¤„ç†ç±»åªéœ€è¦åœ¨ç±»ä¸Šæ ‡æ³¨ @RestControllerAdviceï¼Œå¹¶åœ¨å¤„ç†ç›¸åº”å¼‚å¸¸çš„æ–¹æ³•ä¸Šä½¿ç”¨ @ExceptionHandler æ³¨è§£ï¼Œå†™æ˜å¤„ç†å“ªä¸ªå¼‚å¸¸å³å¯</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre><td class="rouge-code"><pre><span class="nd">@RestControllerAdvice</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GlobalControllerAdvice</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">BAD_REQUEST_MSG</span> <span class="o">=</span> <span class="s">"å®¢æˆ·ç«¯è¯·æ±‚å‚æ•°é”™è¯¯"</span><span class="o">;</span>
    <span class="c1">// &lt;1&gt; å¤„ç† form dataæ–¹å¼è°ƒç”¨æ¥å£æ ¡éªŒå¤±è´¥æŠ›å‡ºçš„å¼‚å¸¸ </span>
    <span class="nd">@ExceptionHandler</span><span class="o">(</span><span class="nc">BindException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">ResultInfo</span> <span class="nf">bindExceptionHandler</span><span class="o">(</span><span class="nc">BindException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">FieldError</span><span class="o">&gt;</span> <span class="n">fieldErrors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">getBindingResult</span><span class="o">().</span><span class="na">getFieldErrors</span><span class="o">();</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">collect</span> <span class="o">=</span> <span class="n">fieldErrors</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">o</span> <span class="o">-&gt;</span> <span class="n">o</span><span class="o">.</span><span class="na">getDefaultMessage</span><span class="o">())</span>
                <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">ResultInfo</span><span class="o">().</span><span class="na">success</span><span class="o">(</span><span class="nc">HttpStatus</span><span class="o">.</span><span class="na">BAD_REQUEST</span><span class="o">.</span><span class="na">value</span><span class="o">(),</span> <span class="no">BAD_REQUEST_MSG</span><span class="o">,</span> <span class="n">collect</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="c1">// &lt;2&gt; å¤„ç† json è¯·æ±‚ä½“è°ƒç”¨æ¥å£æ ¡éªŒå¤±è´¥æŠ›å‡ºçš„å¼‚å¸¸ </span>
    <span class="nd">@ExceptionHandler</span><span class="o">(</span><span class="nc">MethodArgumentNotValidException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">ResultInfo</span> <span class="nf">methodArgumentNotValidExceptionHandler</span><span class="o">(</span><span class="nc">MethodArgumentNotValidException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">FieldError</span><span class="o">&gt;</span> <span class="n">fieldErrors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">getBindingResult</span><span class="o">().</span><span class="na">getFieldErrors</span><span class="o">();</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">collect</span> <span class="o">=</span> <span class="n">fieldErrors</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">o</span> <span class="o">-&gt;</span> <span class="n">o</span><span class="o">.</span><span class="na">getDefaultMessage</span><span class="o">())</span>
                <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">ResultInfo</span><span class="o">().</span><span class="na">success</span><span class="o">(</span><span class="nc">HttpStatus</span><span class="o">.</span><span class="na">BAD_REQUEST</span><span class="o">.</span><span class="na">value</span><span class="o">(),</span> <span class="no">BAD_REQUEST_MSG</span><span class="o">,</span> <span class="n">collect</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="c1">// &lt;3&gt; å¤„ç†å•ä¸ªå‚æ•°æ ¡éªŒå¤±è´¥æŠ›å‡ºçš„å¼‚å¸¸</span>
    <span class="nd">@ExceptionHandler</span><span class="o">(</span><span class="nc">ConstraintViolationException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">ResultInfo</span> <span class="nf">constraintViolationExceptionHandler</span><span class="o">(</span><span class="nc">ConstraintViolationException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">ConstraintViolation</span><span class="o">&lt;?&gt;&gt;</span> <span class="n">constraintViolations</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">getConstraintViolations</span><span class="o">();</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">collect</span> <span class="o">=</span> <span class="n">constraintViolations</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">o</span> <span class="o">-&gt;</span> <span class="n">o</span><span class="o">.</span><span class="na">getMessage</span><span class="o">())</span>
                <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">ResultInfo</span><span class="o">().</span><span class="na">success</span><span class="o">(</span><span class="nc">HttpStatus</span><span class="o">.</span><span class="na">BAD_REQUEST</span><span class="o">.</span><span class="na">value</span><span class="o">(),</span> <span class="no">BAD_REQUEST_MSG</span><span class="o">,</span> <span class="n">collect</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>äº‹å®ä¸Šï¼Œåœ¨å…¨å±€å¼‚å¸¸å¤„ç†ç±»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å†™å¤šä¸ªå¼‚å¸¸å¤„ç†æ–¹æ³•ï¼Œè¿™é‡Œæ€»ç»“äº†ä¸‰ç§å‚æ•°æ ¡éªŒæ—¶å¯èƒ½å¼•å‘çš„å¼‚å¸¸ï¼š</p><ul><li>ä½¿ç”¨ form data æ–¹å¼è°ƒç”¨æ¥å£ï¼Œæ ¡éªŒå¼‚å¸¸æŠ›å‡º BindException<li>ä½¿ç”¨ json è¯·æ±‚ä½“è°ƒç”¨æ¥å£ï¼Œæ ¡éªŒå¼‚å¸¸æŠ›å‡º MethodArgumentNotValidException<li>å•ä¸ªå‚æ•°æ ¡éªŒå¼‚å¸¸æŠ›å‡º ConstraintViolationException</ul><blockquote class="prompt-warning"><div><p>æ³¨ï¼šå•ä¸ªå‚æ•°æ ¡éªŒéœ€è¦åœ¨å‚æ•°ä¸Šå¢åŠ æ ¡éªŒæ³¨è§£ï¼Œå¹¶åœ¨ç±»ä¸Šæ ‡æ³¨@Validated</p></div></blockquote><p>å…¨å±€å¼‚å¸¸å¤„ç†ç±»å¯ä»¥æ·»åŠ å„ç§éœ€è¦å¤„ç†çš„å¼‚å¸¸ï¼Œæ¯”å¦‚æ·»åŠ ä¸€ä¸ªå¯¹ Exception.class çš„å¼‚å¸¸å¤„ç†ï¼Œå½“æ‰€æœ‰ ExceptionHandler éƒ½æ— æ³•å¤„ç†æ—¶ï¼Œç”±å…¶è®°å½•å¼‚å¸¸ä¿¡æ¯ï¼Œå¹¶è¿”å›å‹å¥½æç¤º</p><h1 id="åˆ†ç»„æ ¡éªŒ">åˆ†ç»„æ ¡éªŒ</h1><p>å¦‚æœåŒä¸€ä¸ªå‚æ•°ï¼Œéœ€è¦åœ¨ä¸åŒåœºæ™¯ä¸‹åº”ç”¨ä¸åŒçš„æ ¡éªŒè§„åˆ™ï¼Œå°±éœ€è¦ç”¨åˆ°åˆ†ç»„æ ¡éªŒäº†ã€‚æ¯”å¦‚ï¼šæ–°æ³¨å†Œç”¨æˆ·è¿˜æ²¡èµ·åå­—ï¼Œæˆ‘ä»¬å…è®¸ name å­—æ®µä¸ºç©ºï¼Œä½†æ˜¯ä¸å…è®¸å°†åå­—æ›´æ–°ä¸ºç©ºå­—ç¬¦ã€‚</p><p>åˆ†ç»„æ ¡éªŒæœ‰ä¸‰ä¸ªæ­¥éª¤ï¼š</p><ol><li>å®šä¹‰ä¸€ä¸ªåˆ†ç»„ç±»ï¼ˆæˆ–æ¥å£ï¼‰<li>åœ¨æ ¡éªŒæ³¨è§£ä¸Šæ·»åŠ groupså±æ€§æŒ‡å®šåˆ†ç»„<li>Controller æ–¹æ³•çš„ @Validated æ³¨è§£æ·»åŠ åˆ†ç»„ç±»</ol><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Update</span> <span class="kd">extends</span> <span class="nc">Default</span><span class="o">{</span>
<span class="o">}</span>
</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">user</span> <span class="o">{</span>
    <span class="nd">@NotBlank</span><span class="o">(</span><span class="n">message</span> <span class="o">=</span> <span class="s">"name ä¸èƒ½ä¸ºç©º"</span><span class="o">,</span><span class="n">groups</span> <span class="o">=</span> <span class="nc">Update</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="c1">// çœç•¥å…¶ä»–ä»£ç ...</span>
<span class="o">}</span>
</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"update"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">ResultInfo</span> <span class="nf">update</span><span class="o">(</span><span class="nd">@Validated</span><span class="o">({</span><span class="nc">Update</span><span class="o">.</span><span class="na">class</span><span class="o">})</span> <span class="n">user</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">ResultInfo</span><span class="o">().</span><span class="na">success</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><p>ç»†å¿ƒçš„å°ä¼™ä¼´å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œè‡ªå®šä¹‰çš„ Update åˆ†ç»„æ¥å£ç»§æ‰¿äº† Default æ¥å£ã€‚æ ¡éªŒæ³¨è§£(å¦‚ï¼š@NotBlank)å’Œ @Validated é»˜è®¤éƒ½å±äº Default.class åˆ†ç»„ï¼Œè¿™ä¸€ç‚¹åœ¨ javax.validation.groups.Default æ³¨é‡Šä¸­æœ‰è¯´æ˜</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="cm">/**
 * Default Jakarta Bean Validation group.
 * &lt;p&gt;
 * Unless a list of groups is explicitly defined:
 * &lt;ul&gt;
 *     &lt;li&gt;constraints belong to the {@code Default} group&lt;/li&gt;
 *     &lt;li&gt;validation applies to the {@code Default} group&lt;/li&gt;
 * &lt;/ul&gt;
 * Most structural constraints should belong to the default group.
 *
 * @author Emmanuel Bernard
 */</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Default</span> <span class="o">{</span>
<span class="o">}</span>
</pre></table></code></div></div><p>åœ¨ç¼–å†™ Update åˆ†ç»„æ¥å£æ—¶ï¼Œå¦‚æœç»§æ‰¿äº† Defaultï¼Œä¸‹é¢ä¸¤ä¸ªå†™æ³•å°±æ˜¯ç­‰æ•ˆçš„ï¼š</p><ul><li>@Validated()<li>@Validated({Update.class,Default.class})</ul><p>è¯·æ±‚ä¸€ä¸‹ /update æ¥å£å¯ä»¥çœ‹åˆ°ï¼Œä¸ä»…æ ¡éªŒäº† name å­—æ®µï¼Œä¹Ÿæ ¡éªŒäº†å…¶ä»–é»˜è®¤å±äº Default.class åˆ†ç»„çš„å­—æ®µ</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w">
    </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"å®¢æˆ·ç«¯è¯·æ±‚å‚æ•°é”™è¯¯"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"name ä¸èƒ½ä¸ºç©º"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"age ä¸èƒ½ä¸ºç©º"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email ä¸èƒ½ä¸ºç©º"</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>å¦‚æœ Update ä¸ç»§æ‰¿ Defaultï¼Œ@Validated({Update.class}) å°±åªä¼šæ ¡éªŒå±äº Update.class åˆ†ç»„çš„å‚æ•°å­—æ®µï¼Œä¿®æ”¹åå†æ¬¡è¯·æ±‚è¯¥æ¥å£å¾—åˆ°å¦‚ä¸‹ç»“æœï¼Œå¯ä»¥çœ‹åˆ°ï¼Œ å…¶ä»–å­—æ®µæ²¡æœ‰å‚ä¸æ ¡éªŒ</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w">
    </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"å®¢æˆ·ç«¯è¯·æ±‚å‚æ•°é”™è¯¯"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"name ä¸èƒ½ä¸ºç©º"</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><h1 id="é€’å½’æ ¡éªŒ">é€’å½’æ ¡éªŒ</h1><p>å¦‚æœ user ç±»ä¸­å¢åŠ ä¸€ä¸ª OrderVO ç±»çš„å±æ€§ï¼Œè€Œ OrderVO ä¸­çš„å±æ€§ä¹Ÿéœ€è¦æ ¡éªŒï¼Œå°±ç”¨åˆ°é€’å½’æ ¡éªŒäº†ï¼Œåªè¦åœ¨ç›¸åº”å±æ€§ä¸Šå¢åŠ  @Valid æ³¨è§£å³å¯å®ç°ï¼ˆå¯¹äºé›†åˆåŒæ ·é€‚ç”¨ï¼‰</p><p>OrderVO ç±»å¦‚ä¸‹</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrderVO</span> <span class="o">{</span>
    <span class="nd">@NotNull</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>
    <span class="nd">@NotBlank</span><span class="o">(</span><span class="n">message</span> <span class="o">=</span> <span class="s">"itemName ä¸èƒ½ä¸ºç©º"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">itemName</span><span class="o">;</span>
    <span class="c1">// çœç•¥å…¶ä»–ä»£ç ...</span>
<span class="o">}</span>
</pre></table></code></div></div><p>åœ¨ user ç±»ä¸­å¢åŠ ä¸€ä¸ª OrderVO ç±»å‹çš„å±æ€§</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">user</span> <span class="o">{</span>
    <span class="nd">@NotBlank</span><span class="o">(</span><span class="n">message</span> <span class="o">=</span> <span class="s">"name ä¸èƒ½ä¸ºç©º"</span><span class="o">,</span><span class="n">groups</span> <span class="o">=</span> <span class="nc">Update</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="c1">//éœ€è¦é€’å½’æ ¡éªŒçš„OrderVO</span>
    <span class="nd">@Valid</span>
    <span class="kd">private</span> <span class="nc">OrderVO</span> <span class="n">orderVO</span><span class="o">;</span>
    <span class="c1">// çœç•¥å…¶ä»–ä»£ç ...</span>
<span class="o">}</span>   
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>http://localhost:8080/user/addorderV0.id=1 &amp;orderVO.itemName&amp;age=1 &amp;email=1@1
</pre></table></code></div></div><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w">
    </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"å®¢æˆ·ç«¯è¯·æ±‚å‚æ•°é”™è¯¯"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"itemName ä¸èƒ½ä¸ºç©º"</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><h1 id="è‡ªå®šä¹‰æ ¡éªŒ">è‡ªå®šä¹‰æ ¡éªŒ</h1><p>Spring çš„ Validation ä¸ºæˆ‘ä»¬æä¾›äº†è¿™ä¹ˆå¤šç‰¹æ€§ï¼Œå‡ ä¹å¯ä»¥æ»¡è¶³æ—¥å¸¸å¼€å‘ä¸­ç»å¤§å¤šæ•°å‚æ•°æ ¡éªŒåœºæ™¯äº†ã€‚ä½†æ˜¯ï¼Œä¸€ä¸ªå¥½çš„æ¡†æ¶ä¸€å®šæ˜¯æ–¹ä¾¿æ‰©å±•çš„ã€‚æœ‰äº†æ‰©å±•èƒ½åŠ›ï¼Œå°±èƒ½åº”å¯¹æ›´å¤šå¤æ‚çš„ä¸šåŠ¡åœºæ™¯ï¼Œæ¯•ç«Ÿåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¦‚æœéœ€æ±‚æ²¡å˜é‚£ä¸€å®šæ˜¯éœ€æ±‚å˜äº†ã€‚</p><p>Spring Validation å…è®¸ç”¨æˆ·è‡ªå®šä¹‰æ ¡éªŒï¼Œå®ç°å¾ˆç®€å•ï¼Œåˆ†ä¸¤æ­¥ï¼š</p><ul><li>è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£<li>ç¼–å†™æ ¡éªŒè€…ç±»<div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="nd">@Target</span><span class="o">({</span><span class="no">METHOD</span><span class="o">,</span> <span class="no">FIELD</span><span class="o">,</span> <span class="no">ANNOTATION_TYPE</span><span class="o">,</span> <span class="no">CONSTRUCTOR</span><span class="o">,</span> <span class="no">PARAMETER</span><span class="o">})</span>
<span class="nd">@Retention</span><span class="o">(</span><span class="no">RUNTIME</span><span class="o">)</span>
<span class="nd">@Documented</span>
<span class="nd">@Constraint</span><span class="o">(</span><span class="n">validatedBy</span> <span class="o">=</span> <span class="o">{</span><span class="nc">HaveNoBlankValidator</span><span class="o">.</span><span class="na">class</span><span class="o">})</span><span class="c1">// æ ‡æ˜ç”±å“ªä¸ªç±»æ‰§è¡Œæ ¡éªŒé€»è¾‘</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">HaveNoBlank</span> <span class="o">{</span>
 
  <span class="c1">// æ ¡éªŒå‡ºé”™æ—¶é»˜è®¤è¿”å›çš„æ¶ˆæ¯</span>
  <span class="nc">String</span> <span class="nf">message</span><span class="o">()</span> <span class="k">default</span> <span class="s">"å­—ç¬¦ä¸²ä¸­ä¸èƒ½å«æœ‰ç©ºæ ¼"</span><span class="o">;</span>

  <span class="nc">Class</span><span class="o">&lt;?&gt;[]</span> <span class="n">groups</span><span class="o">()</span> <span class="k">default</span> <span class="o">{</span> <span class="o">};</span>

  <span class="nc">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="nc">Payload</span><span class="o">&gt;[]</span> <span class="nf">payload</span><span class="o">()</span> <span class="k">default</span> <span class="o">{</span> <span class="o">};</span>

  <span class="cm">/**
   * åŒä¸€ä¸ªå…ƒç´ ä¸ŠæŒ‡å®šå¤šä¸ªè¯¥æ³¨è§£æ—¶ä½¿ç”¨
   */</span>
  <span class="nd">@Target</span><span class="o">({</span> <span class="no">METHOD</span><span class="o">,</span> <span class="no">FIELD</span><span class="o">,</span> <span class="no">ANNOTATION_TYPE</span><span class="o">,</span> <span class="no">CONSTRUCTOR</span><span class="o">,</span> <span class="no">PARAMETER</span><span class="o">,</span> <span class="no">TYPE_USE</span> <span class="o">})</span>
  <span class="nd">@Retention</span><span class="o">(</span><span class="no">RUNTIME</span><span class="o">)</span>
  <span class="nd">@Documented</span>
  <span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">List</span> <span class="o">{</span>
      <span class="nc">NotBlank</span><span class="o">[]</span> <span class="nf">value</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HaveNoBlankValidator</span> <span class="kd">implements</span> <span class="nc">ConstraintValidator</span><span class="o">&lt;</span><span class="nc">HaveNoBlank</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isValid</span><span class="o">(</span><span class="nc">String</span> <span class="n">value</span><span class="o">,</span> <span class="nc">ConstraintValidatorContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// null ä¸åšæ£€éªŒ</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">value</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">value</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">" "</span><span class="o">))</span> <span class="o">{</span>
          <span class="c1">// æ ¡éªŒå¤±è´¥</span>
          <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="c1">// æ ¡éªŒæˆåŠŸ</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£ä½¿ç”¨èµ·æ¥å’Œå†…ç½®æ³¨è§£æ— å¼‚ï¼Œåœ¨éœ€è¦çš„å­—æ®µä¸Šæ·»åŠ ç›¸åº”æ³¨è§£å³å¯</p></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/software-development/'>Software Development</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/java/" class="post-tag no-text-decoration" >Java</a> <a href="/tags/spring/" class="post-tag no-text-decoration" >Spring</a> <a href="/tags/devdairy/" class="post-tag no-text-decoration" >DevDairy</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> æœ¬æ–‡ç”±ä½œè€…æŒ‰ç…§ <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> è¿›è¡Œæˆæƒ</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">åˆ†äº«</span> <span class="share-icons"> <a href="https://t.me/share/url?url=https://optimus-xs.github.io/posts/spring-validation-usage/&amp;text=ä¼˜é›…çš„ä½¿ç”¨Spring Validationå®ç°ä¸šåŠ¡å‚æ•°æ ¡éªŒ - Optimus-Xs&#39; Blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://optimus-xs.github.io/posts/spring-validation-usage/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="åˆ†äº«é“¾æ¥" data-title-succeed="é“¾æ¥å·²å¤åˆ¶ï¼"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">æœ€è¿‘æ›´æ–°</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/how-to-write-a-dockerfile-elegantly/">å¦‚ä½•ä¼˜é›…çš„ç¼–å†™Dockerfile</a><li><a href="/posts/java-file-io-usage/">Java æ–‡ä»¶ IO ä½¿ç”¨æ–¹æ³•</a><li><a href="/posts/jvm-gc-mechanism/">JVM çš„åƒåœ¾å›æ”¶æœºåˆ¶</a><li><a href="/posts/docker-engine-installation-on-ubuntu/">åœ¨ Ubuntu ä¸Šå®‰è£… Dockers Engine æµç¨‹</a></ul></div><div id="access-tags"><div class="panel-heading">çƒ­é—¨æ ‡ç­¾</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/devdairy/">DevDairy</a> <a class="post-tag" href="/tags/data-structure/">Data Structure</a> <a class="post-tag" href="/tags/%E5%AE%89%E8%A3%85%E6%B5%81%E7%A8%8B/">å®‰è£…æµç¨‹</a> <a class="post-tag" href="/tags/geekdairy/">GeekDairy</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/redis/">Redis</a> <a class="post-tag" href="/tags/docker/">Docker</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">æ–‡ç« å†…å®¹</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>ç›¸å…³æ–‡ç« </h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/why-autowired-not-recommended/"><div class="card-body"> <em class="timeago small" data-ts="1602220140" > 2020-10-09 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>ä¸ºä»€ä¹ˆä½¿ç”¨ @Autowired æç¤ºä¸æ¨è</h3><div class="text-muted small"><p> @Autowiredæ³¨è§£ç›¸ä¿¡æ¯ä¸ªSpringå¼€å‘è€…éƒ½ä¸é™Œç”Ÿäº†ï¼ ä½†æ˜¯å½“æˆ‘ä»¬ä½¿ç”¨IDEAå†™ä»£ç çš„æ—¶å€™ï¼Œç»å¸¸ä¼šå‘ç°@Autowiredæ³¨è§£ä¸‹é¢æ˜¯æœ‰å°é»„çº¿çš„ï¼Œæˆ‘ä»¬æŠŠå°é¼ æ ‡æ‚¬åœåœ¨ä¸Šé¢ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸ªå¦‚ä¸‹å›¾æ‰€ç¤ºçš„è­¦å‘Šä¿¡æ¯ï¼š é‚£ä¹ˆä¸ºä»€ä¹ˆIDEAä¼šç»™å‡ºField injection is not recommendedè¿™æ ·çš„è­¦å‘Šå‘¢ï¼Ÿ ä¸‹é¢å¸¦ç€è¿™æ ·çš„é—®é¢˜ï¼Œä¸€èµ·æ¥å…¨é¢çš„äº†è§£ä¸‹Springä¸­çš„ä¸‰ç§æ³¨å…¥æ–¹...</p></div></div></a></div><div class="card"> <a href="/posts/spring-security-usage/"><div class="card-body"> <em class="timeago small" data-ts="1614408060" > 2021-02-27 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>SpringSecurity ä½¿ç”¨æ–¹æ³•</h3><div class="text-muted small"><p> ç®€ä»‹ Spring Security æ˜¯ä¸€ä¸ªç›¸å¯¹å¤æ‚çš„å®‰å…¨ç®¡ç†æ¡†æ¶ï¼ŒåŠŸèƒ½æ¯” Shiro æ›´åŠ å¼ºå¤§ï¼Œæƒé™æ§åˆ¶ç»†ç²’åº¦æ›´é«˜ï¼Œå¯¹ OAuth 2 çš„æ”¯æŒä¹Ÿæ›´å‹å¥½ã€‚ ç”±äº Spring Security æºè‡ª Spring å®¶æ—ï¼Œå› æ­¤å¯ä»¥å’Œ Spring æ¡†æ¶æ— ç¼æ•´åˆï¼Œç‰¹åˆ«æ˜¯ Spring Boot ä¸­æä¾›çš„è‡ªåŠ¨åŒ–é…ç½®æ–¹æ¡ˆï¼Œå¯ä»¥è®© Spring Security çš„ä½¿ç”¨æ›´åŠ ä¾¿æ·ã€‚ ä¾èµ–é…ç½® &amp;lt;...</p></div></div></a></div><div class="card"> <a href="/posts/spring-integrate-jwt-auth/"><div class="card-body"> <em class="timeago small" data-ts="1614609960" > 2021-03-01 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>SpringSecurity é›†æˆJWTæƒé™éªŒè¯</h3><div class="text-muted small"><p> ä¸€èˆ¬æ¥è®²ï¼Œå¯¹äºRESTful APIéƒ½ä¼šæœ‰è®¤è¯(Authentication)å’Œæˆæƒ(Authorization)è¿‡ç¨‹ï¼Œä¿è¯APIçš„å®‰å…¨æ€§ã€‚ AuthenticationæŒ‡çš„æ˜¯ç¡®å®šè¿™ä¸ªç”¨æˆ·çš„èº«ä»½ï¼ŒAuthorizationæ˜¯ç¡®å®šè¯¥ç”¨æˆ·æ‹¥æœ‰ä»€ä¹ˆæ“ä½œæƒé™ã€‚ è®¤è¯æ–¹å¼ä¸€èˆ¬æœ‰ä¸‰ç§ Basic Authentication è¿™ç§æ–¹å¼æ˜¯ç›´æ¥å°†ç”¨æˆ·åå’Œå¯†ç æ”¾åˆ°Headerä¸­ï¼Œä½¿ç”¨Autho...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/spring-integrate-jwt-auth/" class="btn btn-outline-primary" prompt="ä¸Šä¸€ç¯‡"><p>SpringSecurity é›†æˆJWTæƒé™éªŒè¯</p></a> <a href="/posts/spring-aop-usage/" class="btn btn-outline-primary" prompt="ä¸‹ä¸€ç¯‡"><p>Spring AOP çš„ä½¿ç”¨æ–¹æ³•</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> Â© 2023 <a href="https://github.com/Optimus-Xs">Optimus-Xs</a>. <span data-toggle="tooltip" data-placement="top" title="é™¤éå¦æœ‰è¯´æ˜ï¼Œæœ¬ç½‘ç«™ä¸Šçš„åšå®¢æ–‡ç« å‡ç”±ä½œè€…æŒ‰ç…§çŸ¥è¯†å…±äº«ç½²å 4.0 å›½é™… (CC BY 4.0) è®¸å¯åè®®è¿›è¡Œæˆæƒã€‚">ä¿ç•™éƒ¨åˆ†æƒåˆ©ã€‚</span></p></div><div class="footer-right"><p class="mb-0"> æœ¬ç«™ç”± <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> ç”Ÿæˆï¼Œé‡‡ç”¨ <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> ä¸»é¢˜ã€‚</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">çƒ­é—¨æ ‡ç­¾</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/devdairy/">DevDairy</a> <a class="post-tag" href="/tags/data-structure/">Data Structure</a> <a class="post-tag" href="/tags/%E5%AE%89%E8%A3%85%E6%B5%81%E7%A8%8B/">å®‰è£…æµç¨‹</a> <a class="post-tag" href="/tags/geekdairy/">GeekDairy</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/redis/">Redis</a> <a class="post-tag" href="/tags/docker/">Docker</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">æœç´¢ç»“æœä¸ºç©º</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/zh-cn.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
